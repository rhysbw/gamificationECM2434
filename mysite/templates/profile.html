{% extends 'base.html' %}

{% load static %}
{% block title %}Profile{% endblock %}

<!-- Data passed to this file from views.py:
streak: The users' current streak
title: The users' title
profileImage: The users' profile image, defaulted to the alien
avatars: List of all the avatar images
number_of_avatars: The length of the avatars list
-->

<!-- author Sam Tebbet and Benjamin -->
{% block style %}
<style>
    .page-container {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
    }

    .userContainer {
        height: 70%;
        width: 60%;
        transform: translate(0%, -10%);
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .userName {
        font-weight: bold;
        font-size: 20px;
    }

    .title {
        font-weight: bold;
        font-size: 18px;
    }

    .userContent {
        width: 100%;
        height: 60%;
        transform: translate(0%, 34%);

        margin-top: 20px;
        text-align: center;
        font-size: 16px;
    }

    .circle {
        position: absolute;
        width: 150px;
        height: 150px;
        border-radius: 50%;

        display: flex;
        justify-content: center;
        align-items: center;

        background-color: #665A48;
        background-size: cover;
        transform: translate(0%, -100%);
    }

    .small-circle {
        position: absolute;
        width: 90px;
        height: 90px;
        border-radius: 50%;

        display: flex;
        justify-content: center;
        align-items: center;
    }
    img {
        border-radius: 50%;
        width: 95%;
        height: 95%
    }

    .circle img {
        border-radius: 50%;
        width: 95%;
        height: 95%
    }

    .card {
            width: 20rem;
            margin: 2rem;
        }

    .image-grid-container {
        display: grid;
        grid-template-columns: auto auto auto;
    }

    .modal-dialog{
       width: 96.5%;
       height: 100%;
        top: 25%;
    }
    /* HIDE RADIO */
    [type=radio] {
      opacity: 0;
      width: 0;
      height: 0;
    }

    /* IMAGE STYLES */
    [type=radio] + img {
      cursor: pointer;
    }

    /* CHECKED STYLES */
    [type=radio]:checked + img {
      outline: 2px solid black;
    }

    @media (max-width: 500px) {
    .dropdown-menu{
        height:250px;
        overflow-y:auto;
    }
}

</style>
{% endblock style %}

<!--- block that will add the body content into base.html --->
{% block content %}
<div class="page-container">
    <div class="userContainer">
         <div class="circle" data-bs-toggle="modal" data-bs-target="#editProfileModal">
             <img src="{{ profileImage }}" alt="Click to change profile picture">
         </div>
        <div class="userContent">
            <p class="userName"> {{user.username}} </p>
            <p class="title">({{title}})</p>
            Streak: {{ streak }} <br>
            Email: {{ user.email }} <br>
            <div class="dropdown">
              <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
                Chage Title
              </button>
              <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                  {% for other_title in titles %}
                            <li><a class="dropdown-item" href="/change_title/{{other_title}}">{{other_title}}</a></li>
                    {% endfor %}

              </ul>
            </div>

        </div>


    </div>
</div>


<!--- modal is a lightbox popup
    Check how iterating though the arrays variable works
    See if you can get the image to load on screen--->'
<div class="modal fade" id="editProfileModal" tabindex="1" role="dialog" aria-hidden="true" >
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-body">
          <div class="container">
              <form action="/change_profile_picture" method="post">
              <div class="image-grid-container">
                  {% for avatar in avatars %}
                        <label>
                          <input type="radio" name="chosen_pfp" value="{{ avatar.0 }}">
                          <img src="{{ avatar.0 }}}">
                        </label>
                  {% endfor %}
              </div>
                  <button type="button" class="btn btn-warning" data-bs-dismiss="modal">Close</button>
                  {% csrf_token %}
            <button type="submit" class="btn btn-success">Save changes</button>
            </form>
          </div>
      </div>
    </div>
  </div>
</div>
{% endblock content %}



